<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Protocolo Experimental</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <div id="main-container">

    <div id="welcome-screen">
      <div class="screen-content">
        <h1>Bienvenido/a al Experimento</h1>
        <p>Gracias por participar. Este estudio investiga la relaci칩n entre la percepci칩n y la atenci칩n. Su duraci칩n aproximada es de 40 minutos.</p>
        <div class="consent-box"><p><strong>Consentimiento Informado:</strong></p><p>Ud. es mayor de 18 a침os. Su participaci칩n es voluntaria. Todos los datos recolectados ser치n an칩nimos y confidenciales. Usted puede decidir abandonar el experimento en cualquier momento sin ninguna penalizaci칩n. Los datos ser치n utilizados exclusivamente con fines de investigaci칩n acad칠mica.</p></div>
        <div class="screening-questions">
        <div class="question-row">
          <p>쯊en칠s alguna dificultad <strong>visual</strong> transitoria o permanente?</p>
          <div class="checkbox-group" id="visual-check">
            <label><input type="checkbox" name="visual" value="si"> SI</label>
            <label><input type="checkbox" name="visual" value="no"> NO</label>
          </div>
        </div>
        <div class="question-row">
          <p>쯊en칠s alguna dificultad <strong>auditiva</strong> transitoria o permanente?</p>
          <div class="checkbox-group" id="audio-check">
            <label><input type="checkbox" name="audio" value="si"> SI</label>
            <label><input type="checkbox" name="audio" value="no"> NO</label>
          </div>
        </div>
        <div class="question-row">
          <p>쯊en칠s alguna dificultad <strong>olfativa</strong> transitoria o permanente?</p>
          <div class="checkbox-group" id="olfactory-check">
            <label><input type="checkbox" name="olfactory" value="si"> SI</label>
            <label><input type="checkbox" name="olfactory" value="no"> NO</label>
          </div>
        </div>
        <p id="ineligible-message" class="hidden">Gracias por tu inter칠s. Para participar en este estudio, es necesario no presentar dificultades sensoriales. 춰Gracias de todas formas!</p>
      </div>
        <div class="consent-action"><input type="checkbox" id="consent-checkbox"><label for="consent-checkbox">He le칤do y acepto los t칠rminos para participar.</label></div>
      </div>
      <div class="screen-footer"><button id="start-button" disabled>Comenzar</button></div>
    </div>

    <div id="id-screen" class="hidden">
        <div class="screen-content"><h1>Creaci칩n de Identificador</h1><p>Por favor, crea tu c칩digo de participante an칩nimo para el experimento.</p><div class="instructions-box">Escribe las <strong>tres 칰ltimas letras</strong> de tu primer apellido, seguido del <strong>d칤a de tu nacimiento</strong> (2 d칤gitos) y la <strong>fecha de hoy</strong> en formato DDMMAAAA (8 d칤gitos).<br><br><i>Ejemplo: Si te apellidas Smith, naciste el 13 de febrero y hoy es <span id="example-date"></span>, tu ID ser칤a: <strong>ith13<span id="example-id-date"></span></strong></i></div><input type="text" id="id-input" placeholder="Escribe tu ID aqu칤..."></div>
        <div class="screen-footer"><button id="id-next-button" disabled>Guardar y Continuar</button></div>
    </div>

    <div id="demographics-screen" class="hidden">
        <div class="screen-content"><h1>Informaci칩n Adicional</h1><p>Por favor, completa los siguientes datos con fines estad칤sticos. Tu identidad permanecer치 an칩nima.</p><div class="form-field"><label for="age-input">Edad:</label><input type="number" id="age-input" min="18"></div><div class="form-field"><label for="gender-select">G칠nero:</label><select id="gender-select"><option value="">Selecciona una opci칩n</option><option value="masculino">Masculino</option><option value="femenino">Femenino</option><option value="otro">Otro</option><option value="prefiero_no_decir">Prefiero no decir</option></select></div><div class="form-field"><label for="major-input">Carrera que estudi치s:</label><input type="text" id="major-input" placeholder="Ej: Lic. en Artes Electr칩nicas"></div></div>
        <div class="screen-footer"><button id="demographics-next-button" disabled>Continuar</button></div>
    </div>
    
    <div id="big-five-screen" class="hidden">
        <div class="screen-content"><h1>Cuestionario de Personalidad</h1><p>A continuaci칩n, por favor complet치 un breve cuestionario de personalidad (Big Five). Al hacer clic en el bot칩n, se abrir치 en una nueva pesta침a.</p><p>Tu ID de participante ya ha sido autocompletado. Por favor, no lo modifiques.</p><p><strong>Cuando termines y env칤es el formulario, cerr치 esa pesta침a y volv칠 aqu칤 para continuar con el experimento.</strong></p></div>
        <div class="screen-footer"><button id="open-big-five-button">Abrir Cuestionario</button><button id="big-five-next-button">He completado el cuestionario</button></div>
    </div>

    <div id="setup-screen" class="hidden">
        <div class="screen-content"><h1>Preparaci칩n</h1><p>Por favor, colocate los auriculares, presion치 el bot칩n "test-audio" y ajust치 el volumen a un nivel c칩modo usando el control deslizante.</p><audio id="test-audio" src="/musicas/prueba.mp3" preload="auto"></audio><button id="play-test-audio-button">Probar Sonido 游꿚</button><div><label for="volume-slider">Volumen:</label><input type="range" id="volume-slider" min="0" max="1" step="0.01" value="0.5"></div></div>
        <div class="screen-footer"><button id="setup-next-button">Siguiente</button></div>
    </div>

    <div id="baseline-screen" class="hidden">
        <div class="screen-content">
            <h1 id="baseline-title">Evaluaci칩n Inicial</h1>
            <p>Por favor, evalu치 c칩mo te sent칤s en este preciso momento seleccionando un n칰mero.</p>

            <div class="scale-container">
              <label>Valencia (Agrado)</label>
              <p class="scale-explanation">Cu치n agradable es el momento actual o cu치n feliz te sent칤s. Si ahora mismo te sent칤s muy feliz o en un estado muy agradable, pod칠s marcar cerca del 9 (la figura sonriente). Si te sent칤s muy triste o sent칤s mucho desagrado, pod칠s marcar cerca del 1 (la figura con el ce침o fruncido). La figura del medio es un punto neutro.</p>
              <div class="sam-images-row">
                  <img src="/images/valence-1.png" alt="Displacer m치ximo"><span class="spacer"></span>
                  <img src="/images/valence-3.png" alt=""><span class="spacer"></span>
                  <img src="/images/valence-5.png" alt="Neutro"><span class="spacer"></span>
                  <img src="/images/valence-7.png" alt=""><span class="spacer"></span>
                  <img src="/images/valence-9.png" alt="Placer m치ximo">
              </div>
              <div class="sam-scale-wrapper">
                <div class="sam-scale" id="scale-valence">
                  <div class="sam-option" data-value="1">1</div><div class="sam-option" data-value="2">2</div><div class="sam-option" data-value="3">3</div><div class="sam-option" data-value="4">4</div><div class="sam-option" data-value="5">5</div><div class="sam-option" data-value="6">6</div><div class="sam-option" data-value="7">7</div><div class="sam-option" data-value="8">8</div><div class="sam-option" data-value="9">9</div>
                </div>
              </div>
            </div>

            <div class="scale-container">
              <label>Activaci칩n (Energ칤a)</label>
              <p class="scale-explanation">La segunda fila mide tu nivel de energ칤a o activaci칩n. Si en este momento te sent칤s muy activado, excitado o alerta, marc치 cerca del 9 (la figura con los ojos abiertos). Si, por el contrario, te sent칤s muy calmado, relajado o somnoliento, marc치 cerca del 1 (la figura adormilada). La figura del medio es un punto neutro.</p>
              <div class="sam-images-row">
                <img src="/images/arousal-1.png" alt="Calma m치xima"><span class="spacer"></span>
                <img src="/images/arousal-3.png" alt=""><span class="spacer"></span>
                <img src="/images/arousal-5.png" alt="Neutro"><span class="spacer"></span>
                <img src="/images/arousal-7.png" alt=""><span class="spacer"></span>
                <img src="/images/arousal-9.png" alt="Excitaci칩n m치xima">
              </div>
              <div class="sam-scale-wrapper">
                <div class="sam-scale" id="scale-arousal">
                  <div class="sam-option" data-value="1">1</div><div class="sam-option" data-value="2">2</div><div class="sam-option" data-value="3">3</div><div class="sam-option" data-value="4">4</div><div class="sam-option" data-value="5">5</div><div class="sam-option" data-value="6">6</div><div class="sam-option" data-value="7">7</div><div class="sam-option" data-value="8">8</div><div class="sam-option" data-value="9">9</div>
                </div>
              </div>
            </div>

            <div class="scale-container">
              <label>Dominancia (Control)</label>
              <p class="scale-explanation">La 칰ltima fila mide tu sensaci칩n de control. Si ahora mismo sent칤s que ten칠s el control total de tus acciones y de la situaci칩n, marc치 cerca del 9 (la figura grande). Si sent칤s que no ten칠s control o que est치s siendo influenciado por tus emociones, marc치 cerca del 1 (la figura peque침a). La figura del medio es un punto neutro.</p>
              <div class="sam-images-row">
                  <img src="/images/dominance-1.png" alt="Poco Control"><span class="spacer"></span>
                  <img src="/images/dominance-3.png" alt=""><span class="spacer"></span>
                  <img src="/images/dominance-5.png" alt="Control Neutro"><span class="spacer"></span>
                  <img src="/images/dominance-7.png" alt=""><span class="spacer"></span>
                  <img src="/images/dominance-9.png" alt="Mucho Control">
              </div>
              <div class="sam-scale-wrapper">
                  <div class="sam-scale" id="scale-control">
                    <div class="sam-option" data-value="1">1</div><div class="sam-option" data-value="2">2</div><div class="sam-option" data-value="3">3</div><div class="sam-option" data-value="4">4</div><div class="sam-option" data-value="5">5</div><div class="sam-option" data-value="6">6</div><div class="sam-option" data-value="7">7</div><div class="sam-option" data-value="8">8</div><div class="sam-option" data-value="9">9</div>
                  </div>
              </div>
            </div>
        </div>
        <div class="screen-footer">
            <button id="baseline-next-button" disabled>Siguiente</button>
        </div>
    </div>

    <div id="stroop-practice-instructions" class="hidden">
      <div class="screen-content"><h1>Pr치ctica: Test de Stroop</h1><p>A continuaci칩n, realizar치s una breve pr치ctica para familiarizarte con la tarea. <strong>No hay l칤mite de tiempo.</strong></p><p id="stroop-practice-instruction-text"></p></div>
      <div class="screen-footer"><button id="stroop-practice-start-button">Comenzar Pr치ctica</button></div>
    </div>
    <div id="stroop-practice-end-screen" class="hidden">
        <div class="screen-content"><h1>Pr치ctica completada</h1><p>춰Muy bien! Ahora comenzar치 la prueba real.</p><p id="stroop-real-instruction-text"></p></div>
        <div class="screen-footer"><button id="stroop-real-test-start-button">Comenzar Test</button></div>
    </div>
    <div id="stroop-task-screen" class="hidden">
        <div class="screen-content"><div class="task-header"><p id="stroop-progress"></p><p id="stroop-timer"></p></div><div id="stroop-stimulus">EST칈MULO</div><div id="stroop-text-buttons" class="button-container hidden"><button class="text-button" data-word="rojo">ROJO</button><button class="text-button" data-word="verde">VERDE</button><button class="text-button" data-word="azul">AZUL</button></div><div id="stroop-color-buttons" class="button-container hidden"><button class="color-button" data-color="red"></button><button class="color-button" data-color="green"></button><button class="color-button" data-color="blue"></button></div></div>
    </div>
    
    <div id="tmt-practice-instructions" class="hidden">
        <div class="screen-content"><h1>Pr치ctica: Test de Trazado</h1><p>Realizar치s una breve pr치ctica para entender el mecanismo. <strong>No hay l칤mite de tiempo.</strong></p><p id="tmt-practice-instruction-text"></p></div>
        <div class="screen-footer"><button id="tmt-practice-start-button">Comenzar Pr치ctica</button></div>
    </div>
    <div id="tmt-practice-end-screen" class="hidden">
        <div class="screen-content"><h1>Pr치ctica completada</h1><p>춰Muy bien! Ahora comenzar치 la prueba real. Intent치 hacerlo lo m치s r치pido posible sin cometer errores.</p></div>
        <div class="screen-footer"><button id="tmt-real-test-start-button">Comenzar Test</button></div>
    </div>
    <div id="tmt-task-screen" class="hidden">
        <div class="screen-content"><div id="tmt-canvas-container"><canvas id="tmt-canvas"></canvas><div id="tmt-circles-container"></div></div></div>
    </div>

    <div id="relaxation-instructions-screen" class="hidden">
        <div class="screen-content"><h1>Fase de Relajaci칩n</h1><p id="relaxation-instructions-text"></p><p>Esta fase durar치 <strong id="relaxation-duration-text">5</strong> minutos. Por favor, intent치 relajarte.</p></div>
        <div class="screen-footer"><button id="start-relaxation-button">Comenzar Relajaci칩n</button></div>
    </div>
    <div id="relaxation-phase-screen" class="hidden">
        <div class="screen-content"><h2>Relajate...</h2><audio id="relaxation-audio" src="" preload="auto"></audio></div>
    </div>
    <div id="final-screen" class="hidden">
        <div class="screen-content">
            <h1>Experimento Finalizado</h1>
            <p>춰Muchas gracias por tu tiempo y participaci칩n!</p>
            <p class="important-instruction">Por favor, avisale al experimentador para continuar con la 칰ltima parte de la sesi칩n antes de presionar el bot칩n.</p>
        </div>
        <div class="screen-footer">
            <button id="show-graph-button">Iniciar Biofeedback</button>
        </div>
    </div>

    <div id="biofeedback-display-screen" class="hidden">
        <div class="screen-content">
            <h1>Tu Respuesta Fisiol칩gica</h1>
            <p>Este gr치fico muestra la evoluci칩n de tu respuesta galv치nica de la piel. Ahora lo discutiremos juntos.</p>
            <div id="feedback-graph-container">
                <img id="feedback-graph-image" src="" alt="Gr치fico de Biofeedback" style="display: none;"/>
                <p id="graph-loading-message">Generando gr치fico, por favor esper치...</p>
            </div>
        </div>
        <div class="screen-footer">
            <button id="end-session-button">Finalizar Sesi칩n</button>
        </div>
    </div>

    <div id="goodbye-screen" class="hidden">
        <div class="screen-content">
            <h1>춰Todo listo!</h1>
            <p>춰Muchas gracias nuevamente por tu participaci칩n!</p>
        </div>
    </div>

  <script src="app.js"></script>
</body>
</html>